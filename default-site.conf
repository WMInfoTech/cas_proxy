<VirtualHost *:80>

  ServerName ${SERVER_NAME}
  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/html
  SetEnvIf X-Forwarded-Proto "https" HTTPS=on

  <Location "/">
    <RequireAny>
      Require user ${CAS_USERS}
      Require ip 127.0.0.1
    </RequireAny>
    CASScope /
    AuthType CAS
    AuthName "CAS Authentication"
    CASAuthNHeader CAS-User
  </Location>

  ProxyRequests Off
  ProxyPreserveHost On
  ProxyPass / ${PROXY_TARGET}
  ProxyPassReverse / ${PROXY_TARGET}

  CASRootProxiedAs ${CAS_PROXY_HOST}

  LogLevel debug
  ErrorLog /dev/stdout
  CustomLog /dev/stdout combined

</VirtualHost>
